<!doctype html>
<html lang="id">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<meta name="theme-color" content="#d94330" />
	<title>Red Snipper â€” WebGIS Potensi Budidaya Kakap Merah</title>

	<!-- Fonts & Icons -->
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

	<!-- Leaflet core -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhpmA9niMITHDYYWHaY8trwxzESMlnP2N1wk=" crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

	<!-- MarkerCluster -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
	<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster-src.js"></script>

	<link rel="stylesheet" href="style.css">
</head>
<body>

	<!-- Intro overlay (initial welcome) - redesigned -->
	<div id="intro" class="intro-overlay" aria-hidden="true" style="display:none">
		<div class="intro-panel intro-split">
			<div class="intro-left">
				<!-- Top controls moved to floating map controls for a cleaner layout -->
				<!-- Keep search and legend in sidebar -->
				
				<div class="intro-preview">
					<!-- lightweight illustrative map preview -->
					<svg width="220" height="140" viewBox="0 0 220 140" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
						<defs>
							<linearGradient id="g1" x1="0" x2="1">
								<stop offset="0" stop-color="#d94330" stop-opacity="0.9"/>
								<stop offset="1" stop-color="#ff7a66" stop-opacity="0.8"/>
							</linearGradient>
						</defs>
						<rect width="220" height="140" rx="10" fill="#07142a" />
						<g transform="translate(12,12)">
							<rect width="196" height="116" rx="8" fill="url(#g1)" opacity="0.18" />
							<path d="M8 90 C50 40, 120 40, 188 80" stroke="#fff" stroke-opacity="0.06" stroke-width="14" stroke-linecap="round" fill="none"/>
							<circle cx="40" cy="60" r="6" fill="#20c997" />
							<circle cx="160" cy="80" r="6" fill="#d94330" />
						</g>
					</svg>
				</div>
				<div class="intro-stats">
					<div><strong>6</strong> lokasi dianalisis</div>
					<div><strong>3</strong> direkomendasikan</div>
				</div>
			</div>
			<div class="intro-right">
				<h2>Selamat datang di Red Snipper</h2>
				<p class="muted">Ringkasan dan petunjuk singkat untuk menggunakan aplikasi ini.</p>
				<div class="intro-tabs">
					<div class="tab-controls">
						<button class="tab-btn active" data-tab="intro">Pengantar</button>
						<button class="tab-btn" data-tab="operasi">Pengoperasian</button>
					</div>
					<div class="tab-content">
						<div class="tab-pane" data-tab="intro">
							<h3>Tentang Red Snipper</h3>
							<p>Red Snipper adalah WebGIS sederhana untuk membantu identifikasi lokasi yang <strong>cocok</strong>, <strong>kurang cocok</strong>, atau <strong>tidak cocok</strong> untuk budidaya ikan kakap merah. Gunakan daftar lokasi, filter, dan peta untuk eksplorasi.</p>
						</div>
						<div class="tab-pane" data-tab="operasi" style="display:none">
							<h3>Cara Mengoperasikan</h3>
							<ol>
								<li>Klik lokasi di daftar atau di peta untuk melihat detail.</li>
								<li>Gunakan kotak pencarian untuk menyaring lokasi.</li>
								<li>Gunakan tombol <strong>ğŸ” All</strong> untuk melihat semua lokasi, dan <strong>Reset</strong> untuk kembali ke view awal.</li>
								<li>Klik thumbnail untuk melihat gambar lebih besar.</li>
							</ol>
						</div>
					</div>
					<div style="margin-top:12px">
						<button id="intro-start" class="btn">Mulai</button>
						<button id="intro-dismiss" class="btn btn-ghost">Tutup</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="app">
		<aside class="sidebar">
			<div class="brand">
				<div class="brand-logo">RS</div>
				<div>
					<h1>Red Snipper</h1>
					<p class="subtitle">Analisis Potensi Budidaya Kakap Merah</p>
				</div>
			</div>

			<div class="controls">
				<div class="controls-top">
					<div class="btn-group">
						<button id="btn-zoom-all" class="btn btn-ghost" title="Zoom ke semua lokasi">ğŸ” All</button>
						<button id="btn-reset-view" class="btn btn-ghost" title="Reset tampilan">âŸ² Reset</button>
					</div>
					<div class="btn-group">
						<button id="btn-theme-toggle" class="btn" aria-pressed="false" title="Toggle tema">ğŸŒ™</button>
						<!-- Locate button: akses lokasi pengguna -->
						<button id="btn-locate" class="btn btn-ghost" aria-pressed="false" title="Akses lokasi saya">ğŸ“</button>
						<button id="btn-basemap-toggle" class="btn btn-ghost" aria-pressed="false" title="Ganti basemap">ğŸ—ºï¸</button>
					</div>
				</div>

				<label class="search">
					<input id="search-input" type="search" placeholder="Cari lokasi atau kata kunci..." aria-label="Cari lokasi" />
				</label>

				<div class="legend" aria-hidden="false">
					<div class="legend-title">Legends</div>
					<div class="legend-items">
						<div><span class="legend-dot suitable"></span> Cocok</div>
						<div><span class="legend-dot less"></span> Kurang Cocok</div>
						<div><span class="legend-dot unsuitable"></span> Tidak Cocok</div>
					</div>
				</div>
			</div>

			<nav class="location-panel">
				<h3>Wilayah Potensial</h3>
				<ul id="location-list" role="list"></ul>
			</nav>

			<footer class="sidebar-footer">
				<button id="btn-export" class="btn btn-sm">Export CSV</button>
				<div class="small">Data contoh â€¢ 2025</div>
			</footer>
		</aside>

		<main class="map-area">
			<div id="map" aria-label="Peta lokasi" role="application"></div>
			
			<!-- spinner while tiles/markers load -->
			<div id="spinner" class="map-spinner" aria-hidden="true" role="status">
				<div class="spinner-ring"></div>
				<div class="spinner-label">Memuat peta...</div>
			</div>
			<div id="info" class="info-card">
				<div id="info-content">Pilih lokasi dari daftar atau peta untuk melihat detail analisis.</div>
			</div>
		</main>
	</div>

	<!-- Modal (hidden by default) -->
	<div id="modal" class="modal" aria-hidden="true">
		<div class="modal-panel">
			<button id="modal-close" class="modal-close">âœ•</button>
			<div id="modal-body"></div>
		</div>
	</div>

	<!-- Data & App script -->
	<script src="data.js"></script>
	<script src="script.js"></script>
</body>
</html>
